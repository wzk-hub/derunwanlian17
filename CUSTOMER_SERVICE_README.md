# 客服系统功能说明

## 功能概述

本系统为家长和老师用户提供了完整的客服支持功能，管理员可以在管理端查看和处理所有客服对话。

## 功能特性

### 1. 用户端功能
- **客服入口**: 在家长和老师界面的左下角有一个蓝色的客服按钮
- **实时对话**: 支持与客服的实时文字对话
- **快捷回复**: 提供常见问题的快捷回复选项
- **未读通知**: 当有新的客服回复时会显示红色通知图标

### 2. 管理端功能
- **对话管理**: 查看所有客服对话列表
- **消息回复**: 管理员可以回复用户消息
- **状态管理**: 可以关闭已完成的对话
- **搜索过滤**: 支持按状态和关键词搜索对话
- **统计信息**: 显示客服系统的统计数据

## 使用方法

### 家长/老师用户

1. **联系客服**
   - 在界面的左下角点击蓝色客服按钮
   - 系统会自动创建或加载您的客服对话

2. **发送消息**
   - 在输入框中输入您的问题
   - 点击发送按钮或按回车键发送
   - 可以使用快捷回复按钮快速提问

3. **查看回复**
   - 客服的回复会实时显示在对话中
   - 有新回复时会显示红色通知图标

### 管理员

1. **访问客服中心**
   - 登录管理端后，点击"客服中心"标签
   - 系统会显示所有客服对话列表

2. **处理对话**
   - 点击左侧的对话列表选择要处理的对话
   - 在右侧查看对话详情和消息历史
   - 在底部输入框输入回复内容并发送

3. **管理对话状态**
   - 对于已完成的对话，可以点击"关闭对话"按钮
   - 系统会自动更新对话状态

## 技术实现

### 数据存储
- 使用localStorage存储客服对话数据
- 数据结构包括对话信息、消息内容和状态

### 组件架构
- `CustomerServiceChat`: 客服对话界面组件
- `CustomerServiceNotification`: 未读消息通知组件
- `AdminCustomerService`: 管理端客服管理页面

### 状态管理
- 对话状态：open（进行中）、closed（已关闭）、pending（待处理）
- 消息状态：已读/未读
- 实时更新：定期检查新消息

## 文件结构

```
src/
├── components/
│   ├── CustomerServiceChat.tsx          # 客服对话组件
│   └── CustomerServiceNotification.tsx  # 客服通知组件
├── models/
│   └── CustomerService.ts               # 客服数据模型
├── pages/
│   ├── admin/
│   │   └── CustomerService.tsx         # 管理端客服页面
│   ├── parent/
│   │   └── ParentDashboard.tsx         # 家长仪表盘（包含客服入口）
│   └── teacher/
│       └── TeacherDashboard.tsx        # 老师仪表盘（包含客服入口）
└── App.tsx                             # 路由配置
```

## 注意事项

1. **数据持久化**: 当前使用localStorage存储，生产环境建议使用数据库
2. **实时通信**: 当前使用轮询方式，建议使用WebSocket实现真正的实时通信
3. **权限控制**: 确保只有管理员可以访问客服管理功能
4. **消息安全**: 建议对用户输入进行内容过滤和安全检查

## 未来扩展

1. **多媒体支持**: 支持图片、文件等多媒体消息
2. **智能回复**: 集成AI客服，提供自动回复功能
3. **工单系统**: 将客服对话转换为工单，支持更复杂的业务流程
4. **满意度评价**: 对话结束后支持用户评价客服服务质量
5. **知识库**: 集成常见问题知识库，提供自助服务